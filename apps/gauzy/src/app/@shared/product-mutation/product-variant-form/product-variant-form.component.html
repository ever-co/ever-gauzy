<nb-card>
	<nb-card-header class="d-flex">
		<div class="flex-row">
			<button (click)="onCancel()" nbButton status="primary" class="mr-4">
				<nb-icon icon="arrow-back-outline"></nb-icon>
			</button>
			<h5>
				{{ 'INVENTORY_PAGE.EDIT_PRODUCT_VARIANT' | translate }}
			</h5>
		</div>
		<nb-icon
			class="ml-auto mt-1 close"
			icon="close-outline"
			(click)="onCancel()"
		></nb-icon>
	</nb-card-header>
	<nb-card-body>
		<form [formGroup]="form" *ngIf="form">
			<div class="form-group">
				<div class="row">
					<div class="col-sm-6 mb-4">
						<label class="label" for="internationalReferenceInput">
							{{
								'INVENTORY_PAGE.INTERNATIONAL_REFERENCE'
									| translate
							}}
						</label>
						<input
							fullWidth
							id="internationalReferenceInput"
							type="text"
							nbInput
							formControlName="internationalReference"
							[placeholder]="
								'INVENTORY_PAGE.INTERNATIONAL_REFERENCE'
									| translate
							"
							[ngClass]="{
								'status-danger':
									form.controls['internationalReference']
										.invalid &&
									form.controls['internationalReference']
										.touched
							}"
						/>
						<div
							class="text-danger"
							*ngIf="
								form.controls['internationalReference']
									.errors &&
								form.controls['internationalReference'].errors
									.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
					</div>
					<div class="col-sm-6 mb-4">
						<label class="label" for="invoicingPolicyInput">
							{{
								'INVENTORY_PAGE.BILLING_INVOICING_POLICY'
									| translate
							}}
						</label>
						<nb-select
							id="unitCostCurrency"
							fullWidth
							[placeholder]="
								'INVENTORY_PAGE.BILLING_INVOICING_POLICY'
									| translate
							"
							formControlName="invoicingPolicy"
							[ngClass]="{
								'status-danger':
									form.controls['invoicingPolicy'].invalid &&
									form.controls['invoicingPolicy'].touched
							}"
						>
							<nb-option
								*ngFor="let policy of billingInvoicingPolicies"
								value="{{ policy }}"
								>{{ policy }}
							</nb-option>
						</nb-select>
						<div
							class="text-danger"
							*ngIf="
								form.controls['invoicingPolicy'].errors &&
								form.controls['invoicingPolicy'].errors.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6 mb-4">
						<label class="label" for="quantityInput">
							{{ 'INVENTORY_PAGE.QUANTITY' | translate }}
						</label>
						<input
							fullWidth
							id="quantityInput"
							type="number"
							formControlName="quantity"
							nbInput
							[placeholder]="
								'INVENTORY_PAGE.QUANTITY' | translate
							"
							[ngClass]="{
								'status-danger':
									form.controls['quantity'].invalid &&
									form.controls['quantity'].touched
							}"
						/>
						<div
							class="text-danger"
							*ngIf="
								form.controls['quantity'].errors &&
								form.controls['quantity'].errors.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
						<div
							class="text-danger"
							*ngIf="
								form.controls['quantity'].errors &&
								form.controls['quantity'].errors.min
							"
						>
							{{ 'VALIDATION.ENTER_POSITIVE_NUMBER' | translate }}
						</div>
					</div>
					<div class="col-sm-6 mb-4">
						<label class="label" for="taxesInput">
							{{ 'INVENTORY_PAGE.TAXES' | translate }}
						</label>
						<input
							fullWidth
							id="taxesInput"
							type="number"
							formControlName="taxes"
							nbInput
							[placeholder]="'INVENTORY_PAGE.TAXES' | translate"
							[ngClass]="{
								'status-danger':
									form.controls['taxes'].invalid &&
									form.controls['taxes'].touched
							}"
						/>
						<div
							class="text-danger"
							*ngIf="
								form.controls['taxes'].errors &&
								form.controls['taxes'].errors.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
						<div
							class="text-danger"
							*ngIf="
								form.controls['taxes'].errors &&
								form.controls['taxes'].errors.min
							"
						>
							{{ 'VALIDATION.ENTER_POSITIVE_NUMBER' | translate }}
						</div>
					</div>
				</div>
				<hr />
				<div class="row">
					<div class="col-sm-8 mb-4">
						<label class="label" for="retailPriceInput">
							{{ 'INVENTORY_PAGE.RETAIL_PRICE' | translate }}
						</label>
						<input
							fullWidth
							id="retailPriceInput"
							type="number"
							formControlName="retailPrice"
							nbInput
							[placeholder]="
								'INVENTORY_PAGE.RETAIL_PRICE' | translate
							"
							[ngClass]="{
								'status-danger':
									form.controls['retailPrice'].invalid &&
									form.controls['retailPrice'].touched
							}"
						/>
						<div
							class="text-danger"
							*ngIf="
								form.controls['retailPrice'].errors &&
								form.controls['retailPrice'].errors.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
						<div
							class="text-danger"
							*ngIf="
								form.controls['retailPrice'].errors &&
								form.controls['retailPrice'].errors.min
							"
						>
							{{ 'VALIDATION.ENTER_POSITIVE_NUMBER' | translate }}
						</div>
					</div>
					<div class="col-sm-4 mb-4">
						<label class="label" for="retailPriceCurrencyInput">
							{{
								'INVENTORY_PAGE.RETAIL_PRICE_CURRENCY'
									| translate
							}}
						</label>
						<nb-select
							id="retailPriceCurrencyInput"
							fullWidth
							formControlName="retailPriceCurrency"
							[placeholder]="
								'INVENTORY_PAGE.RETAIL_PRICE_CURRENCY'
									| translate
							"
							[ngClass]="{
								'status-danger':
									form.controls['retailPriceCurrency']
										.invalid &&
									form.controls['retailPriceCurrency'].touched
							}"
						>
							<nb-option
								*ngFor="let currency of currencies"
								value="{{ currency }}"
								>{{ currency }}
							</nb-option>
						</nb-select>
						<div
							class="text-danger"
							*ngIf="
								form.controls['retailPriceCurrency'].errors &&
								form.controls['retailPriceCurrency'].errors
									.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-8 mb-4">
						<label class="label" for="unitCost">
							{{ 'INVENTORY_PAGE.UNIT_COST' | translate }}
						</label>
						<input
							fullWidth
							id="unitCost"
							type="number"
							formControlName="unitCost"
							nbInput
							[placeholder]="
								'INVENTORY_PAGE.UNIT_COST' | translate
							"
							[ngClass]="{
								'status-danger':
									form.controls['unitCost'].invalid &&
									form.controls['unitCost'].touched
							}"
						/>
						<div
							class="text-danger"
							*ngIf="
								form.controls['unitCost'].errors &&
								form.controls['unitCost'].errors.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
						<div
							class="text-danger"
							*ngIf="
								form.controls['unitCost'].errors &&
								form.controls['unitCost'].errors.min
							"
						>
							{{ 'VALIDATION.ENTER_POSITIVE_NUMBER' | translate }}
						</div>
					</div>
					<div class="col-sm-4 mb-4">
						<label class="label" for="unitCostCurrency">
							{{
								'INVENTORY_PAGE.UNIT_COST_CURRENCY' | translate
							}}
						</label>
						<nb-select
							id="unitCostCurrency"
							fullWidth
							[placeholder]="
								'INVENTORY_PAGE.UNIT_COST_CURRENCY' | translate
							"
							formControlName="unitCostCurrency"
							[ngClass]="{
								'status-danger':
									form.controls['unitCostCurrency'].invalid &&
									form.controls['unitCostCurrency'].touched
							}"
						>
							<nb-option
								*ngFor="let currency of currencies"
								value="{{ currency }}"
								>{{ currency }}
							</nb-option>
						</nb-select>
						<div
							class="text-danger"
							*ngIf="
								form.controls['unitCostCurrency'].errors &&
								form.controls['unitCostCurrency'].errors
									.required
							"
						>
							{{ 'VALIDATION.FIELD_REQUIRED' | translate }}
						</div>
					</div>
				</div>
				<div class="row mb-4">
					<div class="col-sm-4 flex-column">
						<nb-checkbox formControlName="enabled">
							<span>{{
								'INVENTORY_PAGE.ENABLED' | translate
							}}</span>
						</nb-checkbox>
						<nb-checkbox formControlName="isSubscription">
							<span>{{
								'INVENTORY_PAGE.IS_SUBSCRIPTION' | translate
							}}</span>
						</nb-checkbox>
						<nb-checkbox formControlName="isPurchaseAutomatically">
							<span>{{
								'INVENTORY_PAGE.IS_PURCHASE_AUTOMATICALLY'
									| translate
							}}</span>
						</nb-checkbox>
					</div>
					<div class="col-sm-4 flex-column">
						<nb-checkbox formControlName="canBeSold">
							<span>{{
								'INVENTORY_PAGE.CAN_BE_SOLD' | translate
							}}</span>
						</nb-checkbox>
						<nb-checkbox formControlName="canBePurchased">
							<span>{{
								'INVENTORY_PAGE.CAN_BE_PURCHASED' | translate
							}}</span>
						</nb-checkbox>
						<nb-checkbox formControlName="canBeCharged">
							<span>{{
								'INVENTORY_PAGE.CAN_BE_CHARGED' | translate
							}}</span>
						</nb-checkbox>
					</div>
					<div class="col-sm-4 flex-column">
						<nb-checkbox formControlName="canBeRented">
							<span>{{
								'INVENTORY_PAGE.CAN_BE_RENTED' | translate
							}}</span>
						</nb-checkbox>
						<nb-checkbox formControlName="trackInventory">
							<span>{{
								'INVENTORY_PAGE.TRACK_INVENTORY' | translate
							}}</span>
						</nb-checkbox>
						<nb-checkbox formControlName="isEquipment">
							<span>{{
								'INVENTORY_PAGE.IS_EQUIPMENT' | translate
							}}</span>
						</nb-checkbox>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12 mb-4">
						<label class="label" for="notes">
							{{ 'INVENTORY_PAGE.NOTES' | translate }}
						</label>
						<textarea
							nbInput
							fullWidth
							formControlName="notes"
							id="notes"
							[placeholder]="'INVENTORY_PAGE.NOTES' | translate"
						>
						</textarea>
					</div>
				</div>
			</div>
		</form>
	</nb-card-body>
	<nb-card-footer class="text-right">
		<button (click)="onDelete()" status="danger" class="mr-3" nbButton>
			{{ 'BUTTONS.DELETE' | translate }}
		</button>
		<button
			status="success"
			[disabled]="form.invalid"
			nbButton
			(click)="onSaveRequest()"
		>
			{{ 'BUTTONS.SAVE' | translate }}
		</button>
	</nb-card-footer>
</nb-card>
