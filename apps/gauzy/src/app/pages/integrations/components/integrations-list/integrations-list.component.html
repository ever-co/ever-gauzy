<nb-card [nbSpinner]="isLoading$ | async" class="card-scroll">
	<nb-card-header>
		<h4>{{ 'INTEGRATIONS.AVAILABLE_INTEGRATIONS' | translate }}</h4>
	</nb-card-header>
	<nb-card-body>
		<div class="integration-filters">
			<div class="container">
				<div class="row">
					<div class="col-7">
						<input
							#searchElement
							fullWidth
							id="integrationSearch"
							type="text"
							nbInput
							placeholder="{{
								'INTEGRATIONS.SEARCH_INTEGRATIONS' | translate
							}}"
							(keyup)="doSearch($event)"
						/>
					</div>
				</div>
				<div class="row mt-4">
					<div class="col-4">
						<div class="selectors">
							<div>
								<label>{{ 'INTEGRATIONS.INTEGRATION' | translate }}</label>
								<nb-select
									placeholder="{{
										'INTEGRATIONS.SELECT_GROUPS' | translate
									}}"
									*ngIf="
										integrationGroups$
											| async as integrationGroups
									"
									[selected]="
										selectedIntegrationTypeId$ | async
									"
									fullWidth
									(selectedChange)="
										setSelectedIntegrationType($event)
									"
								>
									<nb-option-group
										*ngFor="
											let integrationGroup of integrationGroups
										"
										title="{{ integrationGroup.groupName }}"
									>
										<nb-option
											*ngFor="
												let integrationType of integrationGroup.integrationTypes
											"
											[value]="integrationType.id"
											>{{
												integrationType.name
											}}</nb-option
										>
									</nb-option-group>
								</nb-select>
							</div>
							<div>
								<label>{{ 'INTEGRATIONS.PAID' | translate }}</label>
								<nb-select
									placeholder="{{
										'INTEGRATIONS.FILTER_INTEGRATIONS'
											| translate
									}}"
									fullWidth
									[selected]="
										selectedIntegrationFilter$ | async
									"
									(selectedChange)="
										setSelectedIntegrationFilter($event)
									"
								>
									<nb-option
										*ngFor="let filter of filters"
										[value]="filter.value"
									>
										{{ filter.label }}
									</nb-option>
								</nb-select>
							</div>
						</div>
					</div>
					<div
						class="col-3 d-flex align-items-end justify-content-end"
					>
						<div class="clear-filter">
							<button
								(click)="clearFilter()"
								status="danger"
								size="small"
								nbButton
							>
								{{ 'BUTTONS.CLEAR_ALL' | translate }}
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="grid-container">
			<div
				class="integrations-list"
				*ngIf="integrations$ | async as integrations"
			>
				<a
					[class.disabled]="
						'disabled' ? integration.isComingSoon : ''
					"
					*ngFor="let integration of integrations"
					[routerLink]="[integration.navigation_url]"
					class="list-item"
				>
					<img
						[src]="integration.imgSrc"
						width="100%"
						height="100%"
						alt="image not found"
						[title]="integration.name"
					/>
					<div
						class="comingSoon-wrapper"
						*ngIf="integration.isComingSoon"
					>
						<span class="comingSoon">{{
							'INTEGRATIONS.COMING_SOON' | translate
						}}</span>
					</div>
				</a>
			</div>
		</div>
	</nb-card-body>
</nb-card>
