<nb-card class="card-scroll">
	<nb-card-header class="d-flex">
		<ngx-back-navigation></ngx-back-navigation>
		<h5>{{ 'INTEGRATIONS.ACTIVEPIECES_PAGE.AUTHORIZE.TITLE' | translate }}</h5>
	</nb-card-header>
	<nb-card-body>
		<!-- Show this form if no tenant settings exist -->
		<form class="col-xl-6 col-12" *ngIf="!hasTenantSettings" [formGroup]="form" (ngSubmit)="setupAndAuthorize()">
			<div class="form-group">
				<label for="client_id" class="label">
					{{ 'INTEGRATIONS.ACTIVEPIECES_PAGE.SETTINGS.CLIENT_ID' | translate }}
				</label>
				<input
					fullWidth
					id="client_id"
					formControlName="client_id"
					type="text"
					nbInput
					[placeholder]="'INTEGRATIONS.ACTIVEPIECES_PAGE.SETTINGS.CLIENT_ID_PLACEHOLDER' | translate"
				/>
			</div>

			<div class="form-group">
				<label for="client_secret" class="label">
					{{ 'INTEGRATIONS.ACTIVEPIECES_PAGE.SETTINGS.CLIENT_SECRET' | translate }}
				</label>
				<input
					fullWidth
					id="client_secret"
					formControlName="client_secret"
					type="password"
					nbInput
					[placeholder]="'INTEGRATIONS.ACTIVEPIECES_PAGE.SETTINGS.CLIENT_SECRET_PLACEHOLDER' | translate"
				/>
			</div>
			<div class="hint">
				<nb-icon icon="info-outline"></nb-icon>
				{{ 'INTEGRATIONS.ACTIVEPIECES_PAGE.AUTHORIZE.INFOS' | translate }}
			</div>

			<button
				nbButton
				status="primary"
				[disabled]="form.invalid"
				size="small"
				outline
			>
				{{ 'INTEGRATIONS.ACTIVEPIECES_PAGE.AUTHORIZE.NEXT' | translate }}
			</button>
		</form>

		<!-- Show this if tenant settings already exist -->
		<div class="col-xl-6 col-12" *ngIf="hasTenantSettings">
			<p>{{ 'INTEGRATIONS.ACTIVEPIECES_PAGE.AUTHORIZE.READY_MESSAGE' | translate }}</p>
			<button
				nbButton
				status="primary"
				size="small"
				outline
				[disabled]="loading"
				(click)="startAuthorization()"
			>
				<nb-icon *ngIf="loading" icon="loader-outline"></nb-icon>
				{{ 'INTEGRATIONS.ACTIVEPIECES_PAGE.AUTHORIZE.START_BUTTON' | translate }}
			</button>
		</div>
	</nb-card-body>
</nb-card>
