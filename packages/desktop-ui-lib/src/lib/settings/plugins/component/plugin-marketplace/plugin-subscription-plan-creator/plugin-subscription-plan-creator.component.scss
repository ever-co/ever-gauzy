.subscription-plan-creator {
	padding: 1rem;
	max-width: 100%;

	.header {
		margin-bottom: 2rem;
		text-align: center;

		.title {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 0.5rem;
			margin-bottom: 0.5rem;
			color: var(--text-primary-color);
			font-weight: 600;

			nb-icon {
				font-size: 1.5rem;
			}
		}

		.subtitle {
			color: var(--text-hint-color);
			margin: 0;
			max-width: 600px;
			margin: 0 auto;
		}
	}

	.subscription-form {
		.plans-container {
			display: flex;
			flex-direction: column;
			gap: 2rem;
			margin-bottom: 2rem;

			.plan-card {
				background: var(--background-basic-color-2);
				border: 2px solid var(--border-basic-color-3);
				border-radius: 12px;
				padding: 1.5rem;
				position: relative;
				transition: all 0.3s ease;

				&:hover {
					border-color: var(--color-primary-default);
					box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
				}

				&.popular {
					border-color: var(--color-warning-default);
					box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.2);
				}

				&.recommended {
					border-color: var(--color-info-default);
					box-shadow: 0 0 0 2px rgba(54, 162, 235, 0.2);
				}

				.plan-header {
					display: flex;
					justify-content: space-between;
					align-items: center;
					margin-bottom: 1rem;

					.plan-type-section {
						display: flex;
						align-items: center;
						gap: 1rem;
						flex: 1;

						nb-select {
							min-width: 200px;
						}

						.type-badge {
							font-size: 0.75rem;
							text-transform: uppercase;
							letter-spacing: 0.5px;
						}
					}

					.plan-actions {
						display: flex;
						gap: 0.5rem;

						button {
							width: 32px;
							height: 32px;
							display: flex;
							align-items: center;
							justify-content: center;

							nb-icon {
								font-size: 1rem;
							}
						}
					}
				}

				.plan-badges {
					display: flex;
					gap: 0.5rem;
					margin-bottom: 1rem;

					.badge-popular,
					.badge-recommended {
						display: flex;
						align-items: center;
						gap: 0.25rem;
						font-size: 0.75rem;
						padding: 0.25rem 0.5rem;

						nb-icon {
							font-size: 0.875rem;
						}
					}
				}

				.plan-basic-info {
					display: grid;
					grid-template-columns: 1fr 300px;
					gap: 1.5rem;
					margin-bottom: 1.5rem;

					@media (max-width: 768px) {
						grid-template-columns: 1fr;
						gap: 1rem;
					}

					.name-description {
						display: flex;
						flex-direction: column;
						gap: 1rem;

						nb-form-field {
							margin-bottom: 0;
						}

						textarea {
							resize: vertical;
							min-height: 60px;
						}
					}

					.pricing-info {
						display: flex;
						flex-direction: column;
						gap: 1rem;

						.price-currency {
							display: grid;
							grid-template-columns: 1fr 120px;
							gap: 0.5rem;

							nb-form-field {
								margin-bottom: 0;
							}
						}

						nb-select {
							margin-bottom: 0;
						}

						.price-preview {
							background: var(--background-basic-color-1);
							border: 1px solid var(--border-basic-color-4);
							border-radius: 8px;
							padding: 1rem;
							text-align: center;

							.price-display {
								font-size: 1.5rem;
								font-weight: 700;
								color: var(--color-primary-default);
								display: block;
								margin-bottom: 0.25rem;

								.billing-period {
									font-size: 0.875rem;
									color: var(--text-hint-color);
									font-weight: 400;
								}
							}

							.monthly-equivalent,
							.yearly-savings {
								display: block;
								color: var(--text-hint-color);
								font-size: 0.75rem;
								margin-top: 0.25rem;
							}

							.yearly-savings {
								color: var(--color-success-default);
								font-weight: 600;
							}
						}
					}
				}

				.additional-pricing {
					margin-bottom: 1.5rem;

					.pricing-extras {
						display: grid;
						grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
						gap: 1rem;

						nb-form-field {
							margin-bottom: 0;
						}
					}
				}

				.features-section {
					border-top: 1px solid var(--border-basic-color-4);
					padding-top: 1.5rem;

					.section-title {
						display: flex;
						align-items: center;
						gap: 0.5rem;
						margin-bottom: 1rem;
						color: var(--text-primary-color);
						font-weight: 600;

						nb-icon {
							color: var(--color-success-default);
						}
					}

					.features-list {
						margin-bottom: 1.5rem;

						.features-label {
							display: block;
							font-weight: 600;
							margin-bottom: 0.75rem;
							color: var(--text-primary-color);
						}

						.features-array {
							display: flex;
							flex-direction: column;
							gap: 0.5rem;
							margin-bottom: 1rem;

							.feature-item {
								nb-form-field {
									margin-bottom: 0;
									position: relative;

									button[nbSuffix] {
										position: absolute;
										right: 8px;
										top: 50%;
										transform: translateY(-50%);
										width: 24px;
										height: 24px;
										min-height: 24px;
										border-radius: 50%;
									}

									input {
										padding-right: 40px;
									}
								}
							}
						}

						.feature-actions {
							display: flex;
							gap: 1rem;
							align-items: center;
							flex-wrap: wrap;

							button {
								display: flex;
								align-items: center;
								gap: 0.5rem;
							}

							nb-select {
								min-width: 200px;
							}
						}
					}

					.limitations-list {
						.limitations-label {
							display: block;
							font-weight: 600;
							margin-bottom: 0.75rem;
							color: var(--text-primary-color);
						}

						.limitation-fields {
							display: grid;
							grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
							gap: 1rem;
							margin-bottom: 1rem;

							nb-form-field {
								margin-bottom: 0;
							}
						}

						.custom-limitations {
							margin-bottom: 1rem;

							.custom-limitation-item {
								display: grid;
								grid-template-columns: 1fr 1fr auto;
								gap: 0.5rem;
								margin-bottom: 0.5rem;
								align-items: end;

								nb-form-field {
									margin-bottom: 0;
								}

								button {
									height: 40px;
									width: 40px;
									display: flex;
									align-items: center;
									justify-content: center;
								}
							}
						}
					}
				}
			}
		}

		.add-plan-actions {
			display: flex;
			flex-direction: column;
			gap: 1rem;
			align-items: center;
			padding: 2rem;
			border: 2px dashed var(--border-basic-color-4);
			border-radius: 12px;
			background: var(--background-basic-color-1);
			margin-bottom: 2rem;

			> button {
				display: flex;
				align-items: center;
				gap: 0.5rem;
				font-size: 1rem;
				padding: 0.75rem 1.5rem;
			}

			.plan-templates {
				display: flex;
				gap: 0.75rem;
				flex-wrap: wrap;
				justify-content: center;

				button {
					font-size: 0.875rem;
					padding: 0.5rem 1rem;
				}
			}
		}

		.validation-summary {
			margin-bottom: 2rem;

			nb-alert {
				ul {
					margin: 0.5rem 0 0 0;
					padding-left: 1.5rem;
				}
			}
		}

		.plan-summary {
			background: var(--background-basic-color-1);
			border: 1px solid var(--border-basic-color-4);
			border-radius: 12px;
			padding: 1.5rem;

			h6 {
				margin-bottom: 1rem;
				color: var(--text-primary-color);
				font-weight: 600;
			}

			.summary-cards {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
				gap: 1rem;

				.summary-card {
					background: var(--background-basic-color-2);
					border: 1px solid var(--border-basic-color-3);
					border-radius: 8px;
					padding: 1rem;

					.summary-header {
						display: flex;
						justify-content: space-between;
						align-items: center;
						margin-bottom: 0.5rem;

						.plan-name {
							font-weight: 600;
							color: var(--text-primary-color);
						}
					}

					.summary-price {
						font-size: 1.25rem;
						font-weight: 700;
						color: var(--color-primary-default);
						margin-bottom: 0.25rem;

						.billing-period {
							font-size: 0.75rem;
							color: var(--text-hint-color);
							font-weight: 400;
						}
					}

					.summary-features {
						small {
							color: var(--text-hint-color);
						}
					}
				}
			}
		}
	}
}

// Responsive Design
@media (max-width: 1024px) {
	.subscription-plan-creator {
		.subscription-form {
			.plans-container {
				.plan-card {
					.plan-basic-info {
						.pricing-info {
							.price-currency {
								grid-template-columns: 1fr;
							}
						}
					}

					.additional-pricing {
						.pricing-extras {
							grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
						}
					}

					.features-section {
						.limitations-list {
							.limitation-fields {
								grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
							}

							.custom-limitations {
								.custom-limitation-item {
									grid-template-columns: 1fr;
									gap: 0.75rem;

									button {
										justify-self: start;
										width: auto;
										padding: 0.5rem 1rem;
									}
								}
							}
						}
					}
				}
			}

			.add-plan-actions {
				.plan-templates {
					flex-direction: column;
					width: 100%;

					button {
						width: 100%;
					}
				}
			}
		}
	}
}

@media (max-width: 768px) {
	.subscription-plan-creator {
		padding: 0.5rem;

		.subscription-form {
			.plans-container {
				gap: 1.5rem;

				.plan-card {
					padding: 1rem;

					.plan-header {
						flex-direction: column;
						gap: 1rem;
						align-items: stretch;

						.plan-type-section {
							flex-direction: column;
							gap: 0.75rem;

							nb-select {
								min-width: unset;
							}
						}

						.plan-actions {
							justify-content: center;
						}
					}

					.features-section {
						.features-list {
							.feature-actions {
								flex-direction: column;
								align-items: stretch;

								nb-select {
									min-width: unset;
								}
							}
						}
					}
				}
			}

			.plan-summary {
				.summary-cards {
					grid-template-columns: 1fr;
				}
			}
		}
	}
}

// Animation enhancements
.plan-card {
	animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.feature-item,
.custom-limitation-item {
	animation: fadeInScale 0.2s ease-out;
}

@keyframes fadeInScale {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

// Focus states
nb-form-field input:focus,
nb-form-field textarea:focus,
nb-select:focus {
	box-shadow: 0 0 0 2px rgba(var(--color-primary-default-rgb), 0.2);
}
