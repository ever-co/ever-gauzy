<form [formGroup]="versionForm" (ngSubmit)="submit()">
	<nb-card class="dialog-card" status="basic">
		<nb-card-header class="mb-0">
			<h5 class="title">
				{{
					version
						? ('PLUGIN.DIALOG.VERSION.UPDATE.TITLE' | translate : { number: version.number })
						: ('PLUGIN.DIALOG.VERSION.CREATE.TITLE' | translate : { name: plugin?.name })
				}}
			</h5>
			<span class="cancel"><i (click)="dismiss()" class="fas fa-times"></i></span>
		</nb-card-header>
		<nb-card-body>
			<!-- Version -->
			<lib-plugin-version class="grow" [form]="versionForm"></lib-plugin-version>
			<!-- Source -->
			<lib-plugin-source
				class="grow"
				[form]="versionForm?.get('source')"
				[sourceTypes]="sourceTypes"
			></lib-plugin-source>
		</nb-card-body>
		<nb-card-footer class="text-right mt-0">
			<button nbButton type="button" (click)="dismiss()" outline status="basic">
				{{ 'BUTTONS.CANCEL' | translate }}
			</button>
			<button
				nbButton
				type="submit"
				status="success"
				[disabled]="isFormInvalid || isSubmitting"
				[nbSpinner]="isSubmitting"
				nbSpinnerStatus="success"
				nbSpinnerSize="small"
			>
				{{
					version
						? ('BUTTONS.UPDATE' | translate)
						: ('BUTTONS.CREATE' | translate) + (versionNumber ? ' v' + versionNumber : '')
				}}
			</button>
		</nb-card-footer>
	</nb-card>
</form>
