<lib-form-section *ngIf="form" [formGroup]="form" title="{{ 'PLUGIN.FORM.SOURCE' | translate }}">
	<lib-form-row>
		<nb-form-field *ngIf="form.get('operatingSystem')" class="form-group">
			<label class="label" for="source-os">{{ 'Operating System' | translate }} *</label>
			<nb-select
				fullWidth
				id="source-os"
				formControlName="operatingSystem"
				[status]="getFieldError('operatingSystem') ? 'danger' : 'basic'"
			>
				@for(os of sourceOs; track os) {
				<nb-option [value]="os">
					{{ os | translate | titlecase }}
				</nb-option>
				}
			</nb-select>
		</nb-form-field>
		<nb-form-field *ngIf="form.get('architecture')" class="form-group">
			<label class="label" for="source-arch">{{ 'Architecture' | translate }} *</label>
			<nb-select
				fullWidth
				id="source-arch"
				formControlName="architecture"
				[status]="getFieldError('architecture') ? 'danger' : 'basic'"
			>
				@for(arch of sourceArchs; track arch) {
				<nb-option [value]="arch">
					{{ arch | translate }}
				</nb-option>
				}
			</nb-select>
		</nb-form-field>
	</lib-form-row>

	<lib-form-row *ngIf="form.get('type')">
		<nb-form-field class="form-group full-width">
			<label class="label" for="source-type">{{ 'PLUGIN.FORM.SOURCE_TYPE' | translate }} *</label>
			<nb-select
				fullWidth
				id="source-type"
				formControlName="type"
				[status]="getFieldError('type') ? 'danger' : 'basic'"
			>
				@for(source of sourceTypes; track source) {
				<nb-option [value]="source">
					{{ 'PLUGIN.FORM.SOURCE_TYPES.' + source | translate }}
				</nb-option>
				}
			</nb-select>
		</nb-form-field>
	</lib-form-row>

	<!-- Source-specific fields -->
	<div class="source-container">
		<div class="source-content">
			<!-- choose source -->
			@switch (form.get('type')?.value){
			<!-- NPM -->
			@case (pluginSourceType.NPM) {
			<lib-npm-form [form]="form"></lib-npm-form>
			}

			<!-- CDN -->
			@case (pluginSourceType.CDN) {
			<lib-cdn-form [form]="form"></lib-cdn-form>
			}
			<!-- GAUZY -->
			@case (pluginSourceType.GAUZY) {
			<lib-gauzy-form [form]="form"></lib-gauzy-form>
			}

			<!-- DEFAULT -->
			@default {
			<ngx-no-data-message message="Unknown source"></ngx-no-data-message>
			} }
		</div>
	</div>
</lib-form-section>
