<form [formGroup]="form" (ngSubmit)="submit()">
	<nb-card class="dialog-card" status="basic">
		<nb-card-header class="mb-0">
			<div class="header-content">
				<div class="header-left">
					<div class="icon-container">
						<nb-icon icon="code-outline"></nb-icon>
					</div>
					<div class="header-info">
						<h5 class="title">
							{{
								'PLUGIN.DIALOG.SOURCE.CREATE.TITLE'
									| translate : { name: plugin?.name, number: plugin?.version?.number }
							}}
						</h5>
					</div>
				</div>
				<button nbButton ghost size="small" (click)="dismiss()" class="close-button">
					<nb-icon icon="close-outline"></nb-icon>
				</button>
			</div>
		</nb-card-header>
		<nb-card-body>
			@if(plugin){
			<div class="version-section mb-3">
				<lib-form-row>
					<div class="d-flex flex-column">
						<div class="field-header mb-2">
							<nb-icon icon="layers-outline" class="field-icon"></nb-icon>
							<label class="label" for="version-number">{{ 'PLUGIN.FORM.VERSION' | translate }}</label>
						</div>
						<gauzy-version-selector [pluginId]="plugin?.id"></gauzy-version-selector>
					</div>
				</lib-form-row>
			</div>
			}
			<div class="sources-section">
				<lib-source-container
					class="overflow-auto grow"
					[sources]="sources"
					[sourceTypes]="sourceTypes"
					(add)="addSource($event)"
					(remove)="removeSource($event)"
				></lib-source-container>
			</div>
		</nb-card-body>
		<nb-card-footer class="dialog-footer">
			<div class="footer-actions">
				<button nbButton outline status="basic" (click)="dismiss()" class="cancel-button">
					{{ 'BUTTONS.CANCEL' | translate }}
				</button>
				<button nbButton status="primary" type="submit" [disabled]="form.invalid" class="submit-button">
					<nb-icon icon="checkmark-outline" class="mr-1"></nb-icon>
					{{ 'BUTTONS.CREATE' | translate }}
				</button>
			</div>
		</nb-card-footer>
	</nb-card>
</form>
