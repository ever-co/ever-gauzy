<div class="file-upload-wrapper">
	<div
		class="file-upload-area"
		[class.has-file]="selectedFile"
		[class.drag-over]="isDragOver"
		[class.error]="errorMessage"
		(dragenter)="onDragEnter($event)"
		(dragleave)="onDragLeave($event)"
		(dragover)="onDragOver($event)"
		(drop)="onDrop($event)"
		(click)="triggerFileBrowse()"
	>
		<input #fileInput type="file" hidden (change)="onFileSelected($event)" [accept]="allowedExtensions" />

		<div class="upload-icon-wrapper">
			<nb-icon
				[icon]="selectedFile ? 'checkmark-circle-2-outline' : 'cloud-upload-outline'"
				[status]="selectedFile ? 'success' : errorMessage ? 'danger' : 'primary'"
				class="upload-icon"
			>
			</nb-icon>
			@if(isDragOver) {
			<div class="pulse-ring"></div>
			}
		</div>

		@if(selectedFile){
		<div class="file-info">
			<div class="file-details">
				<nb-icon icon="file-text-outline" class="file-icon"></nb-icon>
				<div class="file-meta">
					<p class="file-name">{{ selectedFile.name }}</p>
					<p class="file-size">
						<nb-icon icon="archive-outline" class="meta-icon"></nb-icon>
						{{ formatFileSize(selectedFile.size) }}
					</p>
				</div>
			</div>
			<button
				type="button"
				nbButton
				outline
				status="danger"
				size="small"
				(click)="removeFile($event)"
				class="remove-btn"
			>
				<nb-icon icon="trash-2-outline"></nb-icon>
				{{ removeText }}
			</button>
		</div>
		}@else {
		<div class="upload-text">
			<h6 class="upload-title">{{ dragDropText }}</h6>
			<p class="upload-divider">
				<span>{{ orText }}</span>
			</p>
			<button type="button" nbButton status="primary" size="medium">
				<nb-icon icon="folder-outline"></nb-icon>
				{{ browseText }}
			</button>
			<p class="hint">
				<nb-icon icon="info-outline"></nb-icon>
				{{ restrictionsText }}
			</p>
		</div>
		}
	</div>

	@if(errorMessage){
	<nb-alert status="danger" size="small" class="error-alert">
		<div class="error-content">
			<nb-icon icon="alert-triangle-outline"></nb-icon>
			<span>{{ errorMessage }}</span>
		</div>
	</nb-alert>
	}
</div>
